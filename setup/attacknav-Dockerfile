# Build stage

FROM node:16
ENV DANGEROUSLY_DISABLE_HOST_CHECK=true
WORKDIR /src

# copy over needed files
COPY nav-app/ /src/nav-app/
COPY layers/*.md /src/layers/
COPY *.md /src/

WORKDIR /src/nav-app

# give user permissions
RUN chown -R node:node ./

# install packages and build 
RUN npm install --unsafe-perm --legacy-peer-deps

EXPOSE 4200

CMD npm start -- --disableHostCheck
#CMD ng serve --host 0.0.0.0 --disableHostCheck
USER node
